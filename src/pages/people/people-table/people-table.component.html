<div class="search-filters">
  <h1 class="search-filters_title">Our people</h1>
  <div class="search-filters_fields">
    <mat-form-field>
      <mat-label>Firstname...</mat-label>
      <label>
        <input
          matInput
          [(ngModel)]="filters.firstname"
          name="firstname"
          placeholder="Ex. Mia"
          #firstname
          autocomplete="off"
        />
      </label>
    </mat-form-field>

    <mat-form-field>
      <mat-label>Lastname...</mat-label>
      <label>
        <input
          matInput
          [(ngModel)]="filters.lastname"
          name="lastname"
          placeholder="Ex. Smith"
          #lastname
          autocomplete="off"
        />
      </label>
    </mat-form-field>

    <mat-form-field>
      <mat-label>Country...</mat-label>
      <label>
        <input
          matInput
          [(ngModel)]="filters.country"
          name="country"
          placeholder="Ex. Austria"
          #country
          autocomplete="off"
        />
      </label>
    </mat-form-field>

    <mat-form-field>
      <mat-label>City...</mat-label>
      <label>
        <input
          matInput
          [(ngModel)]="filters.city"
          name="city"
          placeholder="Ex. Vienna"
          #city
          autocomplete="off"
        />
      </label>
    </mat-form-field>

    <mat-form-field>
      <mat-label>Age...</mat-label>
      <label>
        <input
          matInput
          [(ngModel)]="filters.age"
          name="age"
          placeholder="Ex. 21"
          #age
          autocomplete="off"
        />
      </label>
    </mat-form-field>

    <mat-form-field>
      <mat-label>Role...</mat-label>
      <mat-select
        [(ngModel)]="filters.role"
        name="role"
        #role
      >
        <mat-option *ngFor="let role of roles" [value]="role">
          {{ role }}
        </mat-option>
      </mat-select>
    </mat-form-field>
  </div>
  <div class="search-filters_buttons">
    <button
      mat-stroked-button
      class="button button_reset"
      (click)="resetFilters()"
    >
      RESET FILTERS
    </button>
    <button
      mat-stroked-button
      class="button button_search"
      (click)="onSearchButtonClick()"
    >
      SEARCH
    </button>
  </div>
</div>

<div *ngIf="!selection.selected.length" class="selected-bar inactive">
  <button mat-stroked-button (click)="openDialog()">ADD PERSON</button>
</div>

<div *ngIf="selection.selected.length" class="selected-bar active">
  <p>{{ selection.selected.length + ' selected' }}</p>
  <button mat-mini-fab color="primary">
    <mat-icon class="delete-icon" (click)="deleteUsers()"
      >delete</mat-icon
    >
  </button>
</div>

<div class="loader" *ngIf="loading">
  <app-loader></app-loader>
</div>

<div class="people">
  <table mat-table [dataSource]="dataSource" matSort class="people-table">
    <ng-container matColumnDef="select">
      <th mat-header-cell *matHeaderCellDef>
        <mat-checkbox
          (change)="toggleCheckbox()"
          [checked]="selection.hasValue() && !!(isAllUsersSelected() | async)"
          [indeterminate]="selection.hasValue() && !(isAllUsersSelected() | async)"
        >
        </mat-checkbox>
      </th>
      <td mat-cell *matCellDef="let row">
        <mat-checkbox
          (click)="$event.stopPropagation()"
          (change)="selection.toggle(row)"
          [checked]="selection.isSelected(row)"
        >
        </mat-checkbox>
      </td>
    </ng-container>

    <ng-container matColumnDef="avatar">
      <th *matHeaderCellDef>Avatar</th>
      <td mat-cell *matCellDef="let user">
        <img src="{{ user.avatar }}" class="avatar" alt="" />
      </td>
    </ng-container>

    <ng-container matColumnDef="name">
      <th *matHeaderCellDef mat-sort-header>Name</th>
      <td mat-cell *matCellDef="let user">
        {{ user.firstName + ' ' + user.lastName }}
      </td>
    </ng-container>

    <ng-container matColumnDef="userRole">
      <th *matHeaderCellDef mat-sort-header>Role</th>
      <td mat-cell *matCellDef="let user">{{ user.role }}</td>
    </ng-container>

    <ng-container matColumnDef="lastLoggedIn">
      <th *matHeaderCellDef mat-sort-header>Last logged in</th>
      <td mat-cell *matCellDef="let user" class="wide-column">
        {{ user.lastLoggedIn }}
      </td>
    </ng-container>

    <ng-container matColumnDef="profileViews">
      <th *matHeaderCellDef mat-sort-header>Profile views</th>
      <td mat-cell *matCellDef="let user" class="wide-column">
        {{ user.profileViews }}
      </td>
    </ng-container>

    <ng-container matColumnDef="age">
      <th *matHeaderCellDef mat-sort-header>Age</th>
      <td mat-cell *matCellDef="let user">{{ user.age }}</td>
    </ng-container>

    <ng-container matColumnDef="country">
      <th *matHeaderCellDef mat-sort-header>Country</th>
      <td mat-cell *matCellDef="let user" class="wide-column">
        {{ user.country }}
      </td>
    </ng-container>

    <ng-container matColumnDef="city">
      <th *matHeaderCellDef mat-sort-header>City</th>
      <td mat-cell *matCellDef="let user" class="wide-column">
        {{ user.city }}
      </td>
    </ng-container>

    <ng-container matColumnDef="address">
      <th *matHeaderCellDef mat-sort-header>Address</th>
      <td mat-cell *matCellDef="let user" class="wide-column">
        {{ user.address }}
      </td>
    </ng-container>

    <ng-container matColumnDef="phone">
      <th *matHeaderCellDef mat-sort-header>Phone</th>
      <td mat-cell *matCellDef="let user" class="wide-column">
        {{ user.phone }}
      </td>
    </ng-container>

    <ng-container matColumnDef="company">
      <th *matHeaderCellDef mat-sort-header>Company</th>
      <td mat-cell *matCellDef="let user" class="wide-column">
        {{ user.company }}
      </td>
    </ng-container>

    <ng-container matColumnDef="connections">
      <th *matHeaderCellDef mat-sort-header>Connections</th>
      <td mat-cell *matCellDef="let user" class="wide-column">
        {{ user.connections }}
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let user; columns: displayedColumns"></tr>

    <tr class="mat-row" *matNoDataRow>
      <td class="mat-cell" colspan="14">
        No data matching such filters. Firstname: "{{ firstname.value }}", lastname:
        "{{ lastname.value }}", country: "{{country.value}}", city: "{{city.value}}",
        age: "{{ age.value }}" and role: "{{ role.value }}".
      </td>
    </tr>
  </table>
</div>

<mat-paginator [pageSizeOptions]="[10, 25, 50, 100]"></mat-paginator>
